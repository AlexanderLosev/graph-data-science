[[algorithms-triplets-listing]]
[.alpha]
= Triplets Listing

[abstract]
--
This section describes the Triplets Listing algorithm in the Neo4j Graph Data Science library.
--

include::alpha-note.adoc[tag=alpha-note]

This section includes:

* <<algorithms-triplets-listing-context, History and explanation>>
* <<algorithms-triplets-listing-usecase, Use-cases - when to use the Triplets Listing algorithm>>
* <<algorithms-triplets-listing-syntax, Syntax>>
* <<algorithms-triplets-listing-sample, Triplets Listing algorithm sample>>
* <<algorithms-triplets-listing-support, Graph type support>>


[[algorithms-triplets-listing-context]]
== History and explanation


[[algorithms-triplets-listing-usecase]]
== Use-cases - when to use the Triplets Listing algorithmÂ 


[[algorithms-triplets-listing-syntax]]
== Syntax

.The following will return a stream of triples with `nodeId` for each triangle:
[source, cypher]
----
CALL gds.alpha.triangle.stream(configuration: Map)
YIELD nodeA, nodeB, nodeC
----

.Configuration
[opts="header",cols="1,1,1,1,4"]
|===
| Name            | Type    | Default                | Optional | Description
| concurrency     | Integer | 4                      | yes      | The number of concurrent threads used for running the algorithm. Also provides the default value for 'readConcurrency' and 'writeConcurrency'. This is dependent on the Neo4j edition; for more information, see <<system-requirements-cpu>>.
| readConcurrency | Integer | value of 'concurrency' | yes      | The number of concurrent threads used for reading the graph.
|===

.Results
[opts="header",cols="1,1,6"]
|===
| Name  | Type    | Description
| nodeA | Integer | The ID of node in the given triangle.
| nodeB | Integer | The ID of node in the given triangle.
| nodeC | Integer | The ID of node in the given triangle.
|===

[[algorithms-triplets-listing-sample]]
== Triplets listing algorithm sample

image::triangle_count.png[]

.The following will create a sample graph:
[source, cypher, role=setup-query]
----
CREATE (alice:Person {name: 'Alice'}),
       (michael:Person {name: 'Michael'}),
       (karin:Person {name: 'Karin'}),
       (chris:Person {name: 'Chris'}),
       (will:Person {name: 'Will'}),
       (mark:Person {name: 'Mark'}),

       (michael)-[:KNOWS]->(karin),
       (michael)-[:KNOWS]->(chris),
       (will)-[:KNOWS]->(michael),
       (mark)-[:KNOWS]->(michael),
       (mark)-[:KNOWS]->(will),
       (alice)-[:KNOWS]->(michael),
       (will)-[:KNOWS]->(chris),
       (chris)-[:KNOWS]->(karin)
----

[role=query-example]
--
.The following will return a stream of triples, with the name property for each node in each triangle:
[source, cypher]
----
CALL gds.alpha.triangle.stream({
  nodeProjection: 'Person',
  relationshipProjection: {
    KNOWS: {
      type: 'KNOWS',
      orientation: 'UNDIRECTED'
    }
  }
})
YIELD nodeA, nodeB, nodeC
RETURN
  gds.util.asNode(nodeA).name AS nodeA,
  gds.util.asNode(nodeB).name AS nodeB,
  gds.util.asNode(nodeC).name AS nodeC
----

.Results
[opts="header",cols="1,1,1"]
|===
| nodeA   | nodeB | nodeC
| Michael | Karin | Chris
| Michael | Chris | Will
| Michael | Will  | Mark
|===
--

We can see that there are `KNOWS` triangles containing
"Will, Michael, and Chris", "Will, Mark, and Michael", and "Michael, Karin, and Chris".
This means that everybody in the triangle knows each other.

[[algorithms-triplets-listing-support]]
== Graph type support

The Triangle Count algorithms support the following graph type:

* [x] undirected, unweighted


//== References
//
//* [1] https://www.infoq.com/articles/apache-spark-graphx
//* [2] http://i11www.iti.kit.edu/extra/publications/sw-fclt-05_t.pdf
//* [3] http://www.math.cmu.edu/~ctsourak/tsourICDM08.pdf
//* [4] https://en.wikipedia.org/wiki/Clustering_coefficient
//* [5] https://pdfs.semanticscholar.org/110b/55a017f52abfedca220036ea129d84b7cadc.pdf
//* [6] http://www.pnas.org/content/99/9/5825.full.pdf
//* [7] https://bmcbioinformatics.biomedcentral.com/track/pdf/10.1186/1471-2105-6-270?site=bmcbioinformatics.biomedcentral.com
