[[algorithms-page-rank]]
= Page Rank
:entity: node
:result: score
:algorithm: Page Rank

[abstract]
--
This section describes the PageRank algorithm in the Neo4j Graph Data Science library.
--

This topic includes:

* <<algorithms-page-rank-intro, Introduction>>
* <<algorithms-page-rank-syntax, Syntax>>
** <<algorithms-page-rank-syntax-stream, Stream>>
** <<algorithms-page-rank-syntax-stats, Stats>>
** <<algorithms-page-rank-syntax-mutate, Mutate>>
** <<algorithms-page-rank-syntax-write, Write>>
* <<algorithms-page-rank-examples, Examples>>
** <<algorithms-page-rank-examples-memory-estimation, Memory Estimation>>
** <<algorithms-page-rank-examples-stream, Stream>>
** <<algorithms-page-rank-examples-stats, Stats>>
** <<algorithms-page-rank-examples-write, Mutate>>
** <<algorithms-page-rank-examples-write, Write>>
** <<algorithms-page-rank-examples-unweighted, Unweighted>>
** <<algorithms-page-rank-examples-weighted, Weighted>>
** <<algorithms-page-rank-examples-tolerance, Tolerance>>
** <<algorithms-page-rank-examples-seeding, Seeded components>>


[[algorithms-page-rank-intro]]
== Introduction

The Page Rank algorithm measures the importance of each node within the graph, based on the number incoming relationships and the importance of the corresponding source nodes.
The underlying assumption roughly speaking is that a page is only as important as the pages that link to it.

Page Rank is introduced in the original Google paper as a function that solves the following equation:

image::page-rank-formula.svg[align="center"]

where,

* we assume that a page _A_ has pages _T~1~_ to _T~n~_ which point to it (i.e., are citations).
* _d_ is a damping factor which can be set between 0 and 1.
It is usually set to 0.85.
* _C(A)_ is defined as the number of links going out of page _A_.

This equation is used to iteratively update a candidate solution and arrive at an approximate solution to the same equation.

For more information on this algorithm, see:

* http://infolab.stanford.edu/~backrub/google.html[The original google paper^]
* http://delab.csd.auth.gr/~dimitris/courses/ir_spring06/page_rank_computing/01531136.pdf[An Efficient Partition-Based Parallel PageRank Algorithm^]
* https://arxiv.org/pdf/1407.5107.pdf[PageRank beyond the web^] for use cases

[NOTE]
====
Running this algorithm requires sufficient memory availability.
Before running this algorithm, we recommend that you read <<memory-estimation>>.
====


[[algorithms-page-rank-syntax]]
== Syntax

include::../shared/syntax-named-graph.adoc[]

[[algorithms-page-rank-syntax-stream]]
=== Stream

.Run PageRank in stream mode on a named graph.
[source, cypher]
----
CALL gds.pageRank.stream(
  graphName: String,
  configuration: Map
)
YIELD
  nodeId: Integer,
  score: Float
----

include::../common-configuration/common-parameters-named-graph.adoc[]

include::../common-configuration/common-stream-stats-configuration-named-graph.adoc[]

include::specific-configuration.adoc[]

.Results
[opts="header"]
|===
| Name    | Type    | Description
| nodeId  | Integer | Node ID
| score   | Float   | Page Rank
|===


[[algorithms-page-rank-syntax-stats]]
=== Stats

.Run PageRank in stats mode on a named graph.
[source, cypher]
----
CALL gds.pageRank.stats(
  graphName: String,
  configuration: Map
)
YIELD
  ranIterations: Integer,
  didConverge: Boolean,
  createMillis: Integer,
  computeMillis: Integer,
  centralityDistribution: Map,
  configuration: Map
----

include::../common-configuration/common-parameters-named-graph.adoc[]

include::../common-configuration/common-stream-stats-configuration-named-graph.adoc[]

include::specific-configuration.adoc[]

.Results
[opts="header",cols="1,1,6"]
|===
| Name                   | Type    | Description
| ranIterations          | Integer | The number of iterations run.
| didConverge            | Boolean | Indicates if the algorithm converged.
| createMillis           | Integer | Milliseconds for creating the graph.
| computeMillis          | Integer | Milliseconds for running the algorithm.
| centralityDistribution | Map     | Map containing min, max, mean as well as p50, p75, p90, p95, p99 and p999 percentile values of centrality values.
| configuration          | Map     | The configuration used for running the algorithm.
|===


[[algorithms-page-rank-syntax-mutate]]
=== Mutate

.Run PageRank in mutate mode on a graph stored in the catalog.
[source, cypher]
----
CALL gds.pageRank.mutate(
  graphName: String,
  configuration: Map
)
YIELD
  nodePropertiesWritten: Integer,
  ranIterations: Integer,
  didConverge: Boolean,
  createMillis: Integer,
  computeMillis: Integer,
  mutateMillis: Integer,
  centralityDistribution: Map,
  configuration: Map
----

include::../common-configuration/common-parameters-named-graph.adoc[]

include::../common-configuration/common-mutate-configuration-named-graph.adoc[]

include::specific-configuration.adoc[]

.Results
[opts="header",cols="1,1,6"]
|===
| Name                   | Type    | Description
| ranIterations          | Integer | The number of iterations run.
| didConverge            | Boolean | Indicates if the algorithm converged.
| createMillis           | Integer | Milliseconds for creating the graph.
| computeMillis          | Integer | Milliseconds for running the algorithm.
| mutateMillis           | Integer | Milliseconds for adding properties to the in-memory graph.
| nodePropertiesWritten  | Integer | The number of properties that were written to Neo4j.
| centralityDistribution | Map     | Map containing min, max, mean as well as p50, p75, p90, p95, p99 and p999 percentile values of centrality values.
| configuration          | Map     | The configuration used for running the algorithm.
|===


[[algorithms-page-rank-syntax-write]]
=== Write

.Run PageRank in write mode on a named graph.
[source, cypher]
----
CALL gds.pageRank.write(
  graphName: String,
  configuration: Map
)
YIELD
  nodePropertiesWritten: Integer,
  ranIterations: Integer,
  didConverge: Boolean,
  createMillis: Integer,
  computeMillis: Integer,
  writeMillis: Integer,
  centralityDistribution: Map,
  configuration: Map
----

include::../common-configuration/common-parameters-named-graph.adoc[]

include::../common-configuration/common-write-configuration-named-graph.adoc[]

include::specific-configuration.adoc[]

.Results
[opts="header",cols="1,1,6"]
|===
| Name                   | Type    | Description
| ranIterations          | Integer | The number of iterations run.
| didConverge            | Boolean | Indicates if the algorithm converged.
| createMillis           | Integer | Milliseconds for creating the graph.
| computeMillis          | Integer | Milliseconds for running the algorithm.
| writeMillis            | Integer | Milliseconds for writing result data back.
| nodePropertiesWritten  | Integer | The number of properties that were written to Neo4j.
| centralityDistribution | Map     | Map containing min, max, mean as well as p50, p75, p90, p95, p99 and p999 percentile values of centrality values.
| configuration          | Map     | The configuration used for running the algorithm.
|===

[[algorithms-page-rank-syntax-anonymous]]
=== Anonymous graphs

include::../shared/syntax-anonymous-graphs.adoc[]

.Run PageRank in write mode on an anonymous graph:
[source, cypher]
----
CALL gds.pageRank.write(
  configuration: Map
)
YIELD
  nodePropertiesWritten: Integer,
  ranIterations: Integer,
  didConverge: Boolean,
  createMillis: Integer,
  computeMillis: Integer,
  writeMillis: Integer,
  centralityDistribution: Map,
  configuration: Map
----

include::../common-configuration/common-write-configuration-anonymous-graph.adoc[]

include::specific-configuration.adoc[]

The results are the same as for running write mode with a named graph, <<algorithms-page-rank-syntax-write, specified above>>.


[[algorithms-page-rank-examples]]
== Examples


[[algorithms-page-rank-examples-memory-estimation]]
=== Memory Estimation


[[algorithms-page-rank-examples-stream]]
=== Stream


[[algorithms-page-rank-examples-stats]]
=== Stats


[[algorithms-page-rank-examples-mutate]]
=== Mutate


[[algorithms-page-rank-examples-write]]
=== Write


[[algorithms-page-rank-examples-unweighted]]
=== Unweighted


[[algorithms-page-rank-examples-weighted]]
=== Weighted


[[algorithms-page-rank-examples-tolerance]]
=== Tolerance


[[algorithms-page-rank-examples-seeding]]
=== Seeding


