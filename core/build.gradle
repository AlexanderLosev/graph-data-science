apply plugin: 'java-library'

description = 'Neo4j Graph Data Science :: Core'

dependencies {
    annotationProcessor project(':annotations')
    annotationProcessor project(':config-generator')
    annotationProcessor group: 'org.immutables',           name: 'builder',            version: ver.'immutables'
    annotationProcessor group: 'org.immutables',           name: 'value',              version: ver.'immutables'
    annotationProcessor group: 'org.neo4j',                name: 'annotations',        version: ver.'neo4j'

    compileOnly         group: 'org.immutables',           name: 'builder',            version: ver.'immutables'
    compileOnly         group: 'org.immutables',           name: 'value-annotations',  version: ver.'immutables'
    compileOnly         group: 'org.jetbrains',            name: 'annotations',        version: ver.'jetbrains-annotations'

    [
        'annotations',
        'neo4j-collections',
        'neo4j-command-line',
        'neo4j-common',
        'neo4j-configuration',
        'neo4j-graphdb-api',
        'neo4j-id-generator',
        'neo4j-import-util',
        'neo4j-io',
        'neo4j-kernel-api',
        'neo4j-kernel',
        'neo4j-layout',
        'neo4j-logging',
        'neo4j-monitoring',
        'neo4j-procedure-api',
        'neo4j-record-storage-engine',
        'neo4j-resource',
        'neo4j-schema',
        'neo4j-storage-engine-api',
        'neo4j-token-api',
        'neo4j-values',

        // more modules to choose from
        // 'cypher-ast-factory',
        // 'neo4j-ast',
        // 'neo4j-batch-insert',
        // 'neo4j-bolt',
        // 'neo4j-codegen',
        // 'neo4j-concurrent',
        // 'neo4j-consistency-check',
        // 'neo4j-csv',
        // 'neo4j-cypher-ast-factory',
        // 'neo4j-cypher-expression-evaluator',
        // 'neo4j-cypher-interpreted-runtime',
        // 'neo4j-cypher-ir',
        // 'neo4j-cypher-javacc-parser',
        // 'neo4j-cypher-logical-plans',
        // 'neo4j-cypher-macros',
        // 'neo4j-cypher-planner-spi',
        // 'neo4j-cypher-planner',
        // 'neo4j-cypher-runtime-util',
        // 'neo4j-cypher',
        // 'neo4j-data-collector',
        // 'neo4j-dbms',
        // 'neo4j-diagnostics',
        // 'neo4j-exceptions',
        // 'neo4j-expressions',
        // 'neo4j-fabric',
        // 'neo4j-front-end',
        // 'neo4j-fulltext-index',
        // 'neo4j-graph-algo',
        // 'neo4j-import-tool',
        // 'neo4j-index',
        // 'neo4j-label-index',
        // 'neo4j-lock',
        // 'neo4j-lucene-index',
        // 'neo4j-native',
        // 'neo4j-parser',
        // 'neo4j-procedure',
        // 'neo4j-rewriting',
        // 'neo4j-security',
        // 'neo4j-spatial-index',
        // 'neo4j-ssl',
        // 'neo4j-unsafe',
        // 'neo4j-util',
        // 'neo4j-wal',
        // 'neo4j',
        // 'server-api',
    ].each {
        compileOnly(group: 'org.neo4j', name: it, version: ver.'neo4j') {
            transitive = false
        }
    }

    api(
            project(':annotations'),
            project(':neo4j-kernel-adapter'),
            [group: 'org.bouncycastle',        name: 'bcpkix-jdk15on',           version: ver.'bouncycastle'],
            [group: 'org.apache.commons',      name: 'commons-text',             version: ver.'commons-text'],
            [group: 'org.opencypher',          name: 'cypher-javacc-parser-9.0', version: ver.'opencypher-front-end'],
            [group: 'org.eclipse.collections', name: 'eclipse-collections-api',  version: ver.'eclipse-collections'],
            [group: 'org.eclipse.collections', name: 'eclipse-collections',      version: ver.'eclipse-collections'],
            [group: 'org.ejml',                name: 'ejml-core',                version: ver.'ejml'],
            [group: 'org.ejml',                name: 'ejml-ddense',              version: ver.'ejml'],
            [group: 'de.siegmar',              name: 'fastcsv',                  version: ver.'fastcsv'],
            [group: 'org.hdrhistogram',        name: 'HdrHistogram',             version: ver.'HdrHistogram'],
            [group: 'com.carrotsearch',        name: 'hppc',                     version: ver.'hppc'],
            [group: 'org.openjdk.jol',         name: 'jol-core',                 version: ver.'jol'],
            [group: 'org.jctools',             name: 'jctools-core',             version: ver.'jctools-core'],
            [group: 'io.jsonwebtoken',         name: 'jjwt-api',                 version: ver.'jjwt'],
            [group: 'org.apache.lucene',       name: 'lucene-core',              version: ver.'lucene'],
    )

    implementation(
            [group: 'io.jsonwebtoken', name: 'jjwt-impl', version: ver.'jjwt'],
    )

    // Set hardcoded version of jackson-databind until there is a new version of jjwt-jackson
    implementation(group: 'io.jsonwebtoken', name: 'jjwt-jackson', version: ver.'jjwt') {
        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    }
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.10.6'
    implementation group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-csv', version: ver['jackson']

    testImplementation project(':test-utils')
    testCompileOnly group: 'org.immutables',    name: 'value-annotations',  version: ver.'immutables'
    testCompileOnly group: 'org.immutables',    name: 'builder',            version: ver.'immutables'
    testCompileOnly group: 'org.jetbrains',     name: 'annotations',        version: ver.'jetbrains-annotations'
    testCompileOnly group: 'org.neo4j',         name: 'neo4j',              version: ver.'neo4j'

    testAnnotationProcessor project(':annotations')
    testAnnotationProcessor project(':config-generator')
    testAnnotationProcessor group: 'org.immutables',           name: 'value',              version: ver.'immutables'
    testAnnotationProcessor group: 'org.neo4j',                name: 'annotations',        version: ver.'neo4j'
}
