description = 'Neo4j Labs :: Graph Algorithms'

configurations {
    testCompile {
        exclude(group: 'com.carrotsearch.randomizedtesting', module: 'randomizedtesting-runner')
        exclude(group: 'junit', module: 'junit')
    }
}

dependencies {
    compile project(':algo')

    compile group: 'com.carrotsearch',      name: 'hppc',           version: ver.'hppc'
    compile group: 'io.dropwizard.metrics', name: 'metrics-core',   version: ver.'metrics-core'
    compile group: 'org.hdrhistogram',      name: 'HdrHistogram',   version: ver.'HdrHistogram'
    compile group: 'org.roaringbitmap',     name: 'RoaringBitmap',  version: ver.'RoaringBitmap'

    compileOnly group: 'org.neo4j',             name: 'neo4j',                  version: ver.'neo4j'
    compileOnly group: 'org.neo4j',             name: 'neo4j-slf4j',            version: ver.'neo4j'
    
    // TODO: enable and fix annotation processor
//    annotationProcessor group: 'net.biville.florent',   name: 'neo4j-sproc-compiler',   version: ver.'neo4j-sproc-compiler'

    testCompile project(':test-utils')
    testCompile group: 'org.neo4j',     name: 'neo4j',                          version: ver.'neo4j'
    testCompile group: 'org.neo4j',     name: 'neo4j-kernel',                   version: ver.'neo4j'
    testCompile group: 'org.neo4j',     name: 'neo4j-kernel-api',               version: ver.'neo4j'
    testCompile group: 'org.neo4j',     name: 'neo4j-io',                       version: ver.'neo4j'
    testCompile group: 'net.jqwik',     name: 'jqwik',                          version: ver.'jqwik'
}

test {
    useJUnitPlatform {
        includeEngines "jqwik"
    }
    include '**/*Test.class'
}

task javadocJar(type: Jar) {
    classifier = 'javadoc'
    from(javadoc.destinationDir)
}

tasks.withType(JavaCompile) {
    options.compilerArgs <<
        '-AIgnoreContextWarnings' <<
        '-AGeneratedDocumentationPath=target/generated-documentation' <<
        '-ADocumentation.FieldDelimiter=¦' <<
        '-ADocumentation.ExportedHeaders=qualified name¦description¦type' <<
        '-ADocumentation.QuotedFields=false' <<
        '-ADocumentation.DelimitedFirstField=true' <<
        '-ADocumentation.ExportGrouping=SINGLE'
}
